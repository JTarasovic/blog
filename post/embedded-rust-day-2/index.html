<!doctype html><html lang=en data-mode=dark><head prefix="og: http://ogp.me/ns#"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.74.3 -- gohugo.io / Color Your World -- gitlab.com/rmaguiar/hugo-theme-color-your-world"><title>Embedded Rust Day 2: Electric Boogaloo</title><meta name=author content="Jason Tarasovic"><meta name=robots content="index follow"><meta name=referrer content="no-referrer-when-downgrade"><link rel=canonical href=https://blog.tarasovic.cloud/post/embedded-rust-day-2/><meta property="og:site_name" content="Opinions Were Like Kittens"><meta property="og:title" content="Embedded Rust Day 2: Electric Boogaloo"><meta property="og:url" content="https://blog.tarasovic.cloud/post/embedded-rust-day-2/"><meta property="og:type" content="article"><meta property="article:published_time" content="2020-08-23"><meta property="article:modified_time" content="2020-08-24"><meta property="og:updated_time" content="2020-08-24"><meta name=twitter:creator content="@J_Tarasovic"><meta name=twitter:site content="@J_Tarasovic"><meta name=theme-color content="#222"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="default"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebSite","@id":"https:\/\/blog.tarasovic.cloud\/"},"headline":"Embedded Rust Day 2: Electric Boogaloo","description":"","url":"https:\/\/blog.tarasovic.cloud\/post\/embedded-rust-day-2\/","inLanguage":"en","datePublished":"2020-08-23","dateModified":"2020-08-24","wordCount":"304","publisher":{"@type":"Person","name":"Jason Tarasovic"},"author":{"@type":"Person","name":"Jason Tarasovic","description":"Some Dude","sameAs":["https://github.com/JTarasovic","https://gitlab.com/J_Tarasovic","https://keybase.io/jtarasovic","https://www.linkedin.com/in/jtarasovic","https://www.reddit.com/user/J_Tarasovic","https://twitter.com/J_Tarasovic"]}}</script><link rel=stylesheet href=/css/main.min.ddffb60e54a8fa4a336dbcd0598c141568d68fbb592b1be5b7516c93bf6a0dd9b0657f5907e0c141464501808ad43f586ca6a34db27da8ed78b922250372fedd.css integrity="sha512-3f+2DlSo+kozbbzQWYwUFWjWj7tZKxvlt1Fsk79qDdmwZX9ZB+DBQUZFAYCK1D9YbKajTbJ9qO14uSIlA3L+3Q=="><noscript><meta name=theme-color content="#225670"><style>html{--accent: #225670}.req-js,img.lazyload{display:none}</style></noscript><link rel=preload href=/fonts/open-sans-v17-latin-700.woff as=font crossorigin=anonymous><link rel=preload href=/fonts/open-sans-v17-latin-700.woff2 as=font crossorigin=anonymous><link rel=preload href=/fonts/open-sans-v17-latin-italic.woff as=font crossorigin=anonymous><link rel=preload href=/fonts/open-sans-v17-latin-italic.woff2 as=font crossorigin=anonymous><link rel=preload href=/fonts/open-sans-v17-latin-regular.woff as=font crossorigin=anonymous><link rel=preload href=/fonts/open-sans-v17-latin-regular.woff2 as=font crossorigin=anonymous><link rel=preload href=/fonts/oswald-v29-latin-700.woff as=font crossorigin=anonymous><link rel=preload href=/fonts/oswald-v29-latin-700.woff2 as=font crossorigin=anonymous><script defer src=/js/lazysizes.min.min.a85a0eccaf9ef0d2f083a9dc4d0e05dc90acc5be0e84b43e20fde692871e1861ae0191f7c3ca2c00f2664efabf6aff2625a478b8f22ea43cb056cb6ec9a8d948.js crossorigin=anonymous></script><link rel=me href=https://github.com/JTarasovic><link rel=me href=https://gitlab.com/J_Tarasovic><link rel=me href=https://keybase.io/jtarasovic><link rel=me href=https://www.linkedin.com/in/jtarasovic><link rel=me href=https://www.reddit.com/user/J_Tarasovic><link rel=me href=https://twitter.com/J_Tarasovic><script>'use strict';const ROOT=document.documentElement;const SHEET=document.documentElement.style;const META_THEME_COLOR=document.querySelector('meta[name=theme-color]');function setDark(){ROOT.dataset.mode='dark'};function setLight(){ROOT.dataset.mode='light'};if(localStorage.getItem('isDark')=='true'){setDark()}else if(localStorage.getItem('isDark')=='false'){setLight()};function getAccent(){if(ROOT.dataset.mode==='dark'){if(localStorage.getItem('darkAccent')===null){var currentAccent="#225670"}else{var currentAccent=localStorage.getItem('darkAccent')}}else if(ROOT.dataset.mode==='light'){if(localStorage.getItem('lightAccent')===null){var currentAccent="#225670"}else{var currentAccent=localStorage.getItem('lightAccent')}};return currentAccent};var activeAccent=getAccent();SHEET.setProperty('--accent',activeAccent);META_THEME_COLOR.setAttribute('content',activeAccent);function updateAccent(){var activeAccent=getAccent();SHEET.setProperty('--accent',activeAccent);PALETTE.value=activeAccent;META_THEME_COLOR.setAttribute('content',activeAccent);};document.addEventListener('DOMContentLoaded',function(){PALETTE.value=activeAccent;function smoothTransition(){document.body.style.transition=document.querySelector('header').style.transition=document.querySelector('footer').style.transition='background-color .3s ease, color .3s ease'};function userModeChange(){smoothTransition();if(ROOT.dataset.mode=='light'){setDark();localStorage.setItem('isDark','true')}else{setLight();localStorage.setItem('isDark','false')};updateAccent()};document.querySelector('footer button').addEventListener('click',userModeChange)})</script></head><body><header><a href=/>Opinions Were Like Kittens</a><nav aria-label="Main menu."><ul><li><a class=btn href=/about/>About</a></li></ul></nav></header><div class=filler><main><article><header><h1>Embedded Rust Day 2: Electric Boogaloo</h1><section class=terms><ul><li class=category><a class=btn href=/categories/development/>development</a></li><li><a class=btn href=/tags/embedded/>embedded</a></li><li><a class=btn href=/tags/riscv/>riscv</a></li><li><a class=btn href=/tags/rust/>rust</a></li></ul></section><p>Last updated on <time datetime=2020-08-24>2020-08-24</time></p></header><h2 id=day-2>Day 2 <a class=anchor href=#day-2 title='Anchor for "Day 2".'><svg aria-hidden="true"><use xlink:href="#hashtag"/></svg></a></h2><p>I was hoping to get through a bit more than I did but I guess there will be
some really productive days and some less so.</p><h2 id=risc-v-quickstart-examples>RISC-V Quickstart Examples <a class=anchor href=#risc-v-quickstart-examples title='Anchor for "RISC-V Quickstart Examples".'><svg aria-hidden="true"><use xlink:href="#hashtag"/></svg></a></h2><p>I started looking through the quickstart examples to see if there were any
other examples I wanted to flash while I was poking around at it. More
importantly though, I wanted to start getting into the habit of reading and
mentally parsing Rust.</p><p>I did notice a few things of note:</p><div class=highlight><pre class=chroma aria-label="Box containing code sample." tabindex=0><code class=language-rust data-lang=rust><span class=cp>#[entry]</span><span class=w>
</span><span class=w></span><span class=k>fn</span> <span class=nf>main</span><span class=p>()</span><span class=w> </span>-&gt; <span class=o>!</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=p>...</span><span class=w>
</span><span class=w>    </span><span class=k>loop</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=p>...</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></div><p>This doesn&rsquo;t look all that different from something like an Arduino program.
The first ellipsis seems logically equivalent to <code>void setup() {}</code> and the
second to <code>void loop() {}</code>.</p><div class=highlight><pre class=chroma aria-label="Box containing code sample." tabindex=0><code class=language-rust data-lang=rust><span class=mf>132.</span><span class=n>mhz</span><span class=p>().</span><span class=n>into</span><span class=p>()</span><span class=w>
</span></code></pre></div><p>This is a cool Rust thing. In <code>e310x_hal::time</code> they&rsquo;ve defined and implemented
a trait to convert a <code>u32</code> into <code>Hertz</code>, <code>KiloHertz</code> and <code>MegaHertz</code>. And then
implemented <code>Into</code> to convert into <code>Hertz</code>. I think that&rsquo;s pretty cool. It
allows for a really expressive and readable way to work with frequency while
providing all of the safety that comes from strong typing and the Rust compiler.</p><p>While trying to look up how this was implemented, my IDE wouldn&rsquo;t go to the
definition. I&rsquo;m not sure why but it compiled and worked correctly so I had to
believe that the code was on my machine somewhere. Fortunately, a quick
<code>cargo doc --open</code> was enough for me to find it. 100 points to Gryffindor.</p><p>I also started to look through the HiFive1 and e310x documentation which is
entirely too dry to describe here.</p><h2 id=whats-next>What&rsquo;s next <a class=anchor href=#whats-next title='Anchor for "What&rsquo;s next".'><svg aria-hidden="true"><use xlink:href="#hashtag"/></svg></a></h2><p>Well, that wasn&rsquo;t nearly all that I was hoping to accomplish but, alas, some
days are just like that. I&rsquo;m still waiting on my Discovery board but I&rsquo;m going
to start on the book and read ahead while I&rsquo;m waiting. Hopefully, I can get
started in earnest sometime this week.</p></article></main></div><footer><p></p><section class=req-js><button class=outline-dashed title="Change to light/dark mode."><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><use xlink:href="#adjust"/></svg></button><input class=outline-dashed type=color list=presets value=#225670 title="Change accent color." aria-label="Change accent color."><datalist id=presets><option value=#225670><option value=#225670></datalist></section></footer><svg xmlns="http://www.w3.org/2000/svg" width="0" height="0" aria-hidden="true"><symbol viewBox="0 0 512 512" id="adjust"><path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705.0 184 82.311 184 184 0 101.705-82.311 184-184 184z"/></symbol><symbol viewBox="0 0 448 512" id="hashtag"><path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 00-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 00-11.813 9.891L132.528 128H53.432a12 12 0 00-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 00-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0011.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0011.813-9.891L315.472 384h79.096a12 12 0 0011.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0011.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/></symbol></svg><script>'use strict';const PALETTE=document.querySelector('footer input');PALETTE.onchange=function(){const PICK=PALETTE.value;SHEET.setProperty('--accent',PICK);if(ROOT.dataset.mode==='light'){localStorage.setItem('lightAccent',PICK)}else{localStorage.setItem('darkAccent',PICK)};updateAccent()};</script></body></html>